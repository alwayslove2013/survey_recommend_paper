(this.webpackJsonpsurvey_recommend_paper=this.webpackJsonpsurvey_recommend_paper||[]).push([[0],{139:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),r=n.n(i),a=n(67),s=n.n(a),o=(n(139),n(13)),d=n.n(o),l=n(68),u=n(8),j=(n(141),n(30)),f=(n(142),n(2)),b=f.g(f.h),h=function(e){return b(e.type)},v=r.a.memo((function(e){var t=e.data,n=e.setSelectedNode,r=t.nodes,a=t.links;console.log(r,a);var s=Object(i.useState)(0),o=Object(u.a)(s,2),d=o[0],l=o[1],b=Object(i.useState)(0),v=Object(u.a)(b,2),O=v[0],m=v[1];Object(i.useEffect)((function(){var e=f.i(".NodeView").node().getBoundingClientRect();l(e.width),m(e.height)}),[]);var x=f.e(r).force("link",f.c(a).id((function(e){return e.id}))).force("charge",f.d()).force("center",f.b(d/2,O/2)),p=f.i("#node-view-svg");p.selectAll("*").remove();var y=p.append("g").attr("id","link-g").attr("stroke","#999").selectAll("line").data(a).join("line").attr("stroke-width",1).attr("stroke-opacity",.6).attr("pointer-events","none"),g=p.append("g").attr("id","node-g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(r).join("circle").attr("id",(function(e){return e.id})).attr("r",5).attr("fill",h).style("cursor","pointer").on("click",(function(e,t){n(t),e.stopPropagation(),_(t)})).call(function(e){return f.a().on("start",(function(t){t.active||e.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(t){t.active||e.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}))}(x)),_=function(e){var t=new Set([].concat(Object(j.a)(e.cite_list),Object(j.a)(e.cited_list),[e.id]));f.j("circle").attr("opacity",(function(e){return t.has(e.id)?1:.2})),f.j("circle").attr("stroke",(function(t){return t.id==e.id?"#f03b20":null})),f.j("circle").attr("stroke-width",(function(t){return t.id==e.id?2.4:null})),f.j("line").attr("stroke-opacity",(function(e){return t.has(e.source.id)&&t.has(e.target.id)?.6:.1}))};x.on("tick",(function(){y.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),g.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))}));return Object(c.jsx)("div",{className:"NodeView",children:Object(c.jsx)("svg",{width:"100%",height:"100%",id:"node-view-svg",onClick:function(){f.j("circle").attr("opacity",1),f.j("circle").attr("stroke",null),f.j("circle").attr("stroke-width",1.5),f.j("line").attr("stroke-opacity",.6)}})})})),O=r.a.memo((function(e){var t=e.selectedNode,n=t.id,i=t.data,r=void 0===i?{}:i;t.cited_list;return Object(c.jsxs)("div",{className:"DetailView",children:[Object(c.jsxs)("div",{children:["title: ",r.title]}),Object(c.jsxs)("div",{children:["doi: ",r.doi||n]}),Object(c.jsxs)("div",{children:["author: ",r.author]}),Object(c.jsxs)("div",{children:["year: ",r.year]})]})})),m=(n(143),r.a.memo((function(e){var t=e.cite_node_list,n=e.cited_node_list;return console.log(t,n),Object(c.jsxs)("div",{className:"RecommendView",children:[Object(c.jsx)("div",{children:"cite:"}),t.map((function(e){return Object(c.jsx)("div",{children:e.data.title||e.id},e.id)})),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:"cited:"}),n.map((function(e){return Object(c.jsx)("div",{children:e.data.title},e.id)}))]})}))),x=n(167);var p=function(){var e=Object(i.useState)({nodes:[],links:[]}),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(4),s=Object(u.a)(a,2),o=s[0],j=s[1],b=Object(i.useState)(4),h=Object(u.a)(b,2),p=h[0],y=h[1];Object(i.useEffect)((function(){(function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.f("[20210105]survey_nodes.json");case 2:t=(t=e.sent).filter((function(e){return"in_survey"===e.type||e.cited_count>=o||e.cite_count>=p})),n=new Set(t.map((function(e){return e.id}))),c=[],t.forEach((function(e){e.cite_list.forEach((function(t){return n.has(t)&&c.push({source:e.id,target:t})})),e.type="in_survey"===e.type?"survey":e.cited_count>e.cite_count})),r({nodes:t,links:c});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,p]);var g=Object(i.useState)({}),_=Object(u.a)(g,2),w=_[0],k=_[1];console.log("select",w);var N=n.nodes.filter((function(e){return(w.cite_list||[]).indexOf(e.id)>-1})),S=n.nodes.filter((function(e){return(w.cited_list||[]).indexOf(e.id)>-1}));return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("div",{className:"NodeViewContainer",children:Object(c.jsx)(v,{data:n,setSelectedNode:k})}),Object(c.jsx)("div",{className:"RecommendViewContainer",children:Object(c.jsx)(m,{cite_node_list:N,cited_node_list:S})}),Object(c.jsx)("div",{className:"DetailViewContainer",children:Object(c.jsx)(O,{selectedNode:w})}),Object(c.jsxs)("div",{className:"ControlPanel",children:[Object(c.jsxs)("div",{className:"panelItem",children:[Object(c.jsx)("div",{className:"panelItem-title",children:"cite count \u2265"}),Object(c.jsx)("div",{className:"panelItem-component",children:Object(c.jsx)(x.a,{min:1,max:10,style:{width:50},defaultValue:o,onChange:j,size:"small"})})]}),Object(c.jsxs)("div",{className:"panelItem",children:[Object(c.jsx)("div",{className:"panelItem-title",children:"cited count \u2265 "}),Object(c.jsx)("div",{className:"panelItem-component",children:Object(c.jsx)(x.a,{min:1,max:10,style:{width:50},defaultValue:p,onChange:y,size:"small"})})]})]})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};n(162);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),y()}},[[163,1,2]]]);
//# sourceMappingURL=main.256b5129.chunk.js.map